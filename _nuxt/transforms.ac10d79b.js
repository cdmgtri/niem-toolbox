import{a as C,_ as G}from"./page-header.f275153c.js";import{a as M,o as a,b as s,f as e,c as k,j as v,t as y,p as B,k as D,h as $,n as z,m as T,u as L,l as F,w as f,g as V,q as R,F as x,r as q,i as w,s as U,e as m}from"./entry.9716547f.js";import"./pages.b69801a5.js";const J=t=>(B("data-v-7b5c2f6f"),t=t(),D(),t),W=J(()=>e("hr",null,null,-1)),X={__name:"form-legend",props:{label:{type:String,required:!0},icon:{type:String,required:!1,default:null},ariaLabel:{type:String,required:!1,default:null}},setup(t){return(l,r)=>{const i=C;return a(),s("div",null,[e("legend",null,[t.icon?(a(),k(i,{key:0,icon:"bi bi-"+t.icon,"aria-label":t.ariaLabel},null,8,["icon","aria-label"])):v("",!0),e("span",null,y(t.label),1)]),W])}}},H=M(X,[["__scopeId","data-v-7b5c2f6f"]]),Y=["aria-label"],K={__name:"icon-step",props:{step:{type:String,required:!0}},setup(t){return(l,r)=>(a(),s("i",{class:$(`bi bi-${t.step}-circle i-step`),"aria-label":`Step ${t.step}`},null,10,Y))}},A={controlId:{type:String,required:!0},label:{type:String,required:!0},step:{type:String,required:!1,default:null},icon:{type:String,required:!1,default:null},ariaLabel:{type:String,required:!1,default:null},note:{type:String,required:!1,default:null}};const Q={class:"form-group mb-4"},Z=["for"],ee={__name:"form-group",props:{...A},setup(t){return(l,r)=>{const i=K,p=C;return a(),s("div",Q,[e("label",{for:l.controlId,class:"text-niem mb-2"},[l.step?(a(),k(i,{key:0,step:l.step},null,8,["step"])):l.icon?(a(),k(p,z(T({key:1},L(A))),null,16)):v("",!0),e("span",null,y(l.label),1)],8,Z),F(l.$slots,"default",{},void 0,!0)])}}},O=M(ee,[["__scopeId","data-v-0597f2b2"]]),te=["id","name","multiple","size","required"],ne={key:0,class:"text-muted"},le={__name:"form-group-select",props:{...A,multiple:{type:Boolean,required:!1,default:!1},size:{type:Number,required:!1,default:null},required:{type:Boolean,required:!1,default:!0},note:{type:String,required:!1,default:null}},setup(t){const l=t;return(r,i)=>{const p=O;return a(),k(p,z(V(l)),{default:f(()=>[e("select",{id:r.controlId,class:"form-select",name:r.controlId,multiple:t.multiple,size:t.size,required:t.required},[F(r.$slots,"default")],8,te),t.note?(a(),s("small",ne,y(t.note),1)):v("",!0)]),_:3},16)}}},oe={class:"form-group mb-3"},ae={key:0,for:"formFileInput",class:"form-label"},se=["multiple","accept"],re={key:1,class:"form-text note"},ie={__name:"form-file-picker",props:{label:{type:String,required:!1,default:null},multiple:{type:Boolean,required:!1,default:!1},accept:{type:String,required:!1,default:"*"},note:{type:String,required:!1,default:null}},setup(t){return(l,r)=>(a(),s("div",oe,[t.label?(a(),s("label",ae,y(t.label),1)):v("",!0),e("input",{id:"file",class:"form-control",type:"file",multiple:t.multiple,accept:t.accept},null,8,se),t.note?(a(),s("small",re,y(t.note),1)):v("",!0)]))}};const ce=["id"],de=["id","data-bs-target","aria-controls","aria-selected"],ue={class:"tab-content mb-3"},pe=["id","aria-labelledby"],me={__name:"nav-group",props:{navStyle:{type:String,required:!1,default:"tabs",validator(t){return["tabs","pills"].includes(t)}},group:{type:String,required:!1,default:"default"},icons:{type:Array,required:!1,default:null}},setup(t){const l=t,r=R(),i=Object.keys(r).map(o=>o.replaceAll("-"," "));function p(o){return`tab-pane-${l.group}-${o}`.replaceAll(" ","-").toLowerCase()}function h(o){return i.indexOf(o)}function S(o){return`tab-btn-${l.group}-${p(o)}`}function N(o){return h(o)===0?"active":""}function E(o){const c=h(o);return`tab-pane-${l.navStyle} `+(c===0?"show active":"")}function b(o){const c=h(o);return l.icons[c]}return(o,c)=>{const d=C;return a(),s("div",null,[e("ul",{id:`tab-ul-${t.group}`,class:$(`nav nav-${t.navStyle}`),role:"tablist"},[(a(!0),s(x,null,q(L(i),n=>(a(),s("li",{key:n,class:"nav-item",role:"presentation"},[e("button",{id:S(n),class:$("nav-link "+N(n)),"data-bs-toggle":"tab","data-bs-target":"#"+p(n),type:"button",role:"tab","aria-controls":p(n),"aria-selected":h(n)===0},[t.icons?(a(),k(d,{key:0,icon:b(n)},null,8,["icon"])):v("",!0),w(" "+y(n),1)],10,de)]))),128))],10,ce),e("div",ue,[(a(!0),s(x,null,q(L(i),n=>(a(),s("div",{id:p(n),key:n,class:$("tab-pane fade "+E(n)),role:"tabpanel","aria-labelledby":S(n),tabindex:"0"},[F(o.$slots,n,{},void 0,!0)],10,pe))),128))])])}}},fe=M(me,[["__scopeId","data-v-97df7c56"]]),_e="https://tools.niem.gov/api/v2/";class be{static async transform(l){const r=_e+"transforms/models";return await fetch(r,{body:l,method:"post"})}}const u=t=>(B("data-v-789134a2"),t=t(),D(),t),ye=u(()=>e("div",null,[e("p",null,"Steps:"),e("ul",null,[e("li",null,"Choose one or both of the following:"),e("ul",null,[e("li",null,"Select input format and output formats for a model transformation"),e("li",null,"Select input format and output formats for sample instance transformations")]),e("li",null,"Upload files or select option to use demo files (no upload required)"),e("li",null,"Select transformation options")]),e("p",null,"Notes:"),e("ul",null,[e("li",null,[w("Note: Hold down the "),e("kbd",null,"Ctrl"),w(" or "),e("kbd",null,"Cmd"),w(" key to select multiple or de-select options")])])],-1)),he=u(()=>e("div",null,[e("ul",null,[e("li",null,"The lists of options in the four select boxes for available input and output formats are pulled from the NIEM API rather than hardcoded. These options are cached locally by the app and only updated once a new API version is available."),e("li",null,"The uploaded file(s) and selected options are sent to the NIEM API for transformation. If no files are provided, the API will return samples based on the Crash Driver IEPD developed for NIEM training.")])],-1)),ve=u(()=>e("div",null,[e("form")],-1)),ge={class:"container-fluid card"},ke={id:"form-transform",action:"javascript:void(0)",enctype:"multipart/form-data"},Se={class:"row my-3"},Ie={class:"col"},$e=u(()=>e("p",null,"Select the input format and file for the transformation.",-1)),we={class:"col"},xe=u(()=>e("p",null,"Select desired output formats and run the transformation.",-1)),qe={class:"row my-3"},Ce={class:"col"},Me=["value","disabled"],Ne={class:"col"},Ee=u(()=>e("div",{class:"form-check mt-2"},[e("input",{id:"checkbox-sample",type:"checkbox",class:"form-check-input",checked:""}),e("label",{for:"checkbox-sample",class:"form-check-label text-secondary"},"Automatically use available samples based on the Crash Driver IEPD developed for NIEM training.")],-1)),Le=u(()=>e("p",null,null,-1)),Ae={class:"col"},Fe=["value","disabled"],Pe=u(()=>e("span",null,"Submit",-1)),Be=u(()=>e("br",null,null,-1)),De=u(()=>e("br",null,null,-1)),ze=u(()=>e("h4",null,"API call failed",-1)),Oe=u(()=>e("pre",null,[e("code",{id:"text-warning"})],-1)),je={__name:"transforms",setup(t){const l=[{key:"xsd",label:"XML Schemas",disabled:!1,accept:".xsd, .zip"},{key:"cmf",label:"CMF-XML",disabled:!1,accept:".cmf, .cmf.xml"},{key:"cmf-json",label:"CMF-JSON",disabled:!0,accept:".cmf.json"},{key:"cmf-yaml",label:"CMF-YAML",disabled:!0,accept:".cmf.yml, .cmf.yaml"},{key:"csv",label:"NIEM CSVs",disabled:!0,accept:".csv"}],r=[{key:"xsd",label:"XML Schemas",disabled:!1},{key:"cmf-xml",label:"CMF-XML",disabled:!1},{key:"cmf-json",label:"CMF-JSON",disabled:!0},{key:"cmf-yaml",label:"CMF-YAML",disabled:!0},{key:"csv",label:"NIEM CSVs",disabled:!0},{key:"json_schema",label:"JSON Schema",disabled:!1},{key:"owl",label:"OWL",disabled:!1},{key:"doc-spread",label:"Documentation spreadsheet",disabled:!0}];let i,p;async function h(){event.preventDefault();const b=document.getElementById("form-transform"),o=document.getElementById("btn-submit"),c=new FormData(b,o),d=document.getElementById("file");c.append("file",d.files[0]);const n=await be.transform(c);if(n.ok){const g=await n.blob(),I=n.headers.get("Content-Disposition").split("=")[1];S(g,I)}else{const g=await n.json();E(g)}}function S(b,o){const c=window.URL.createObjectURL(b),d=document.createElement("a");d.href=c,d.download=o,document.body.appendChild(d),d.click(),d.remove()}function N(){i.style.display="none"}function E(b){p.textContent=JSON.stringify(b,null,2),i.style.display="block"}return U(()=>{i=document.getElementById("div-warning"),p=document.getElementById("text-warning")}),(b,o)=>{const c=G,d=H,n=le,g=ie,P=fe,I=O,j=C;return a(),s("div",null,[m(c,{id:"transforms"},{user:f(()=>[ye]),developer:f(()=>[he]),preferences:f(()=>[ve]),_:1}),e("div",ge,[e("form",ke,[e("div",Se,[e("div",Ie,[m(d,{label:"Input",icon:"file-earmark-arrow-up"}),$e]),e("div",we,[m(d,{label:"Output",icon:"file-earmark-arrow-down"}),xe])]),e("div",qe,[e("div",Ce,[m(n,{"control-id":"from",label:"Select a NIEM model format",multiple:!0,size:l.length},{default:f(()=>[(a(),s(x,null,q(l,_=>e("option",{key:_.key,value:_.key,disabled:_.disabled},y(_.label),9,Me)),64))]),_:1},8,["size"]),e("div",Ne,[m(I,{"control-id":"div-select-input",label:"Select input file"},{default:f(()=>[m(P,{"nav-style":"tabs",group:"input-selection"},{Upload:f(()=>[m(g,{accept:"*",note:"Do not upload sensitive or distribution-restricted files.",multiple:!1})]),Demo:f(()=>[Ee,Le]),_:1})]),_:1})])]),e("div",Ae,[m(n,{"control-id":"to",label:"Select NIEM model output formats",multiple:!0,size:r.length,note:"Hold the Control/Command key to select multiple options"},{default:f(()=>[(a(),s(x,null,q(r,_=>e("option",{key:_.key,value:_.key,disabled:_.disabled},y(_.label),9,Fe)),64))]),_:1},8,["size"]),m(I,{"control-id":"output-run-transformation",label:"Run the transformation"},{default:f(()=>[e("button",{id:"btn-submit",onclick:h,class:"btn btn-niem"},[m(j,{icon:"play-btn"}),Pe])]),_:1})])])]),Be,De,e("div",{id:"div-warning",class:"alert alert-warning alert-dismissible fade show",style:{display:"none"},role:"alert"},[e("button",{type:"button",class:"btn-close",onclick:N,"aria-label":"Close"}),ze,Oe])])])}}},Re=M(je,[["__scopeId","data-v-789134a2"]]);export{Re as default};
