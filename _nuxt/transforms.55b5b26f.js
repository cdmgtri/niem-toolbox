import{a as q,_ as j}from"./page-header.20e45e8b.js";import{a as $,o,b as a,f as e,c as v,j as h,t as f,p as x,k as F,h as A,n as L,m as D,u as V,l as N,w as d,g as G,q as R,e as i,F as C,r as M,i as I}from"./entry.b3699440.js";import"./pages.b69801a5.js";const J=t=>(x("data-v-7b5c2f6f"),t=t(),F(),t),U=J(()=>e("hr",null,null,-1)),W={__name:"form-legend",props:{label:{type:String,required:!0},icon:{type:String,required:!1,default:null},ariaLabel:{type:String,required:!1,default:null}},setup(t){return(l,n)=>{const c=q;return o(),a("div",null,[e("legend",null,[t.icon?(o(),v(c,{key:0,icon:"bi bi-"+t.icon,"aria-label":t.ariaLabel},null,8,["icon","aria-label"])):h("",!0),e("span",null,f(t.label),1)]),U])}}},X=$(W,[["__scopeId","data-v-7b5c2f6f"]]),H=["aria-label"],T={__name:"icon-step",props:{step:{type:String,required:!0}},setup(t){return(l,n)=>(o(),a("i",{class:A(`bi bi-${t.step}-circle i-step`),"aria-label":`Step ${t.step}`},null,10,H))}},w={controlId:{type:String,required:!0},label:{type:String,required:!0},step:{type:String,required:!1,default:null},icon:{type:String,required:!1,default:null},ariaLabel:{type:String,required:!1,default:null},note:{type:String,required:!1,default:null}};const Y={class:"form-group mb-4"},K=["for"],Q={__name:"form-group",props:{...w},setup(t){return(l,n)=>{const c=T,p=q;return o(),a("div",Y,[e("label",{for:l.controlId,class:"text-niem mb-2"},[l.step?(o(),v(c,{key:0,step:l.step},null,8,["step"])):l.icon?(o(),v(p,L(D({key:1},V(w))),null,16)):h("",!0),e("span",null,f(l.label),1)],8,K),N(l.$slots,"default",{},void 0,!0)])}}},E=$(Q,[["__scopeId","data-v-0597f2b2"]]),Z=["id","name","multiple","size","required"],ee={key:0,class:"text-muted"},te={__name:"form-group-select",props:{...w,multiple:{type:Boolean,required:!1,default:!1},size:{type:Number,required:!1,default:null},required:{type:Boolean,required:!1,default:!0},note:{type:String,required:!1,default:null}},setup(t){const l=t;return(n,c)=>{const p=E;return o(),v(p,L(G(l)),{default:d(()=>[e("select",{id:n.controlId,class:"form-select",name:n.controlId,multiple:t.multiple,size:t.size,required:t.required},[N(n.$slots,"default")],8,Z),t.note?(o(),a("small",ee,f(t.note),1)):h("",!0)]),_:3},16)}}},le={class:"form-group mb-3"},oe={key:0,for:"formFileInput",class:"form-label"},ne=["multiple","accept"],se={key:1,class:"form-text note"},ae={__name:"form-file-picker",props:{label:{type:String,required:!1,default:null},multiple:{type:Boolean,required:!1,default:!1},accept:{type:String,required:!1,default:"*"},note:{type:String,required:!1,default:null}},setup(t){return(l,n)=>(o(),a("div",le,[t.label?(o(),a("label",oe,f(t.label),1)):h("",!0),e("input",{id:"file",class:"form-control",type:"file",multiple:t.multiple,accept:t.accept},null,8,ne),t.note?(o(),a("small",se,f(t.note),1)):h("",!0)]))}},re="https://tools.niem.gov/api/v2/";class ie{static async transform(l){const n=re+"transforms/models";return await fetch(n,{body:l,method:"post"})}}const u=t=>(x("data-v-2d2722e8"),t=t(),F(),t),ce=u(()=>e("div",null,[e("p",null,"Steps:"),e("ul",null,[e("li",null,"Select input format and output formats for a model transformation"),e("li",null,"Upload file to transform")]),e("p",null,"Notes:"),e("ul",null,[e("li",null,[I("Note: Hold down the "),e("kbd",null,"Ctrl"),I(" or "),e("kbd",null,"Cmd"),I(" key to select multiple or de-select options")])])],-1)),de=u(()=>e("div",null,[e("ul",null,[e("li",null,"This page makes a POST request to the NIEM API to transform the user's file with the given options.")])],-1)),ue=u(()=>e("div",null,[e("form")],-1)),me={class:"container-fluid card"},fe={id:"form-transform",action:"javascript:void(0)",enctype:"multipart/form-data",class:"mb-2"},pe={class:"row my-3"},_e={class:"col"},be=u(()=>e("p",null,"Select the input format and file for the transformation.",-1)),ye={class:"col"},he=u(()=>e("p",null,"Select desired output formats and run the transformation.",-1)),ge={class:"row my-3"},ve={class:"col"},ke=["value","disabled"],Se={class:"col"},Ie=["value","disabled"],we={class:"row"},qe={class:"col"},$e={class:"col"},Ce=u(()=>e("span",null,"Submit",-1)),Me=u(()=>e("h4",null,"API call failed",-1)),xe=u(()=>e("pre",null,[e("code",{id:"text-warning"})],-1)),Fe={__name:"transforms",setup(t){const l=[{key:"xsd",label:"XML Schemas",disabled:!1,accept:".xsd, .zip"},{key:"cmf",label:"CMF-XML",disabled:!1,accept:".cmf, .cmf.xml"},{key:"cmf-json",label:"CMF-JSON",disabled:!0,accept:".cmf.json"},{key:"cmf-yaml",label:"CMF-YAML",disabled:!0,accept:".cmf.yml, .cmf.yaml"},{key:"csv",label:"NIEM CSVs",disabled:!0,accept:".csv"}],n=[{key:"xsd",label:"XML Schemas",disabled:!1},{key:"cmf",label:"CMF-XML",disabled:!1},{key:"cmf-json",label:"CMF-JSON",disabled:!0},{key:"cmf-yaml",label:"CMF-YAML",disabled:!0},{key:"csv",label:"NIEM CSVs",disabled:!0},{key:"json_schema",label:"JSON Schema",disabled:!1},{key:"owl",label:"OWL",disabled:!1},{key:"doc-spread",label:"Documentation spreadsheet",disabled:!0}];let c,p;async function B(){event.preventDefault();const _=document.getElementById("form-transform"),g=document.getElementById("btn-submit"),b=new FormData(_,g),s=document.getElementById("file");b.append("file",s.files[0]);const m=await ie.transform(b);if(m.ok){const y=await m.blob(),S=m.headers.get("Content-Disposition").split("=")[1];z(y,S)}else{const y=await m.json();O(y)}}function z(_,g){const b=window.URL.createObjectURL(_),s=document.createElement("a");s.href=b,s.download=g,document.body.appendChild(s),s.click(),s.remove()}function P(){c.style.display="none"}function O(_){p.textContent=JSON.stringify(_,null,2),c.style.display="block"}return R(()=>{c=document.getElementById("div-warning"),p=document.getElementById("text-warning")}),(_,g)=>{const b=j,s=X,m=te,y=ae,k=E,S=q;return o(),a("div",null,[i(b,{id:"transforms"},{user:d(()=>[ce]),developer:d(()=>[de]),preferences:d(()=>[ue]),_:1}),e("div",me,[e("form",fe,[e("div",pe,[e("div",_e,[i(s,{label:"Input",icon:"file-earmark-arrow-up"}),be]),e("div",ye,[i(s,{label:"Output",icon:"file-earmark-arrow-down"}),he])]),e("div",ge,[e("div",ve,[i(m,{"control-id":"from",label:"Select a NIEM model format",multiple:!0,size:l.length},{default:d(()=>[(o(),a(C,null,M(l,r=>e("option",{key:r.key,value:r.key,disabled:r.disabled},f(r.label),9,ke)),64))]),_:1},8,["size"])]),e("div",Se,[i(m,{"control-id":"to",label:"Select NIEM model output formats",multiple:!0,size:n.length,note:"Hold the Control/Command key to select multiple options"},{default:d(()=>[(o(),a(C,null,M(n,r=>e("option",{key:r.key,value:r.key,disabled:r.disabled},f(r.label),9,Ie)),64))]),_:1},8,["size"])])]),e("div",we,[e("div",qe,[i(k,{"control-id":"div-select-input",label:"Select input file"},{default:d(()=>[i(y,{accept:"*",note:"Do not upload sensitive or distribution-restricted files.",multiple:!1})]),_:1})]),e("div",$e,[i(k,{"control-id":"output-run-transformation",label:"Run the transformation"},{default:d(()=>[e("button",{id:"btn-submit",onclick:B,class:"btn btn-niem"},[i(S,{icon:"play-btn"}),Ce])]),_:1})])])]),e("div",{id:"div-warning",class:"alert alert-warning alert-dismissible fade show",style:{display:"none"},role:"alert"},[e("button",{type:"button",class:"btn-close",onclick:P,"aria-label":"Close"}),Me,xe])])])}}},Be=$(Fe,[["__scopeId","data-v-2d2722e8"]]);export{Be as default};
